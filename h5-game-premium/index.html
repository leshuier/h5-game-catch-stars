<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¥ä½æ˜Ÿæ˜Ÿ Premium - å¯ç›ˆåˆ©H5å°æ¸¸æˆ</title>
    <meta name="description" content="HTML5å°æ¸¸æˆï¼Œæ§åˆ¶ç¯®å­æ¥ä½æ˜Ÿæ˜Ÿå’Œå®çŸ³ï¼Œé¿å¼€ç‚¸å¼¹ã€‚æ”¯æŒå¹¿å‘Šå’Œåº”ç”¨å†…è´­ä¹°ã€‚">
    <meta name="keywords" content="HTML5æ¸¸æˆ,å°æ¸¸æˆ,æ¥ä½æ˜Ÿæ˜Ÿ,ç›ˆåˆ©æ¸¸æˆ,å¹¿å‘Šæ¸¸æˆ">
    <meta name="author" content="Clawdbot-CN">
    
    <!-- PWAé…ç½® -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#4dffea">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <!-- æ ·å¼ -->
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google AdSense å¹¿å‘Šä»£ç  -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7608517677287601" crossorigin="anonymous"></script>
    
    <!-- å¹¿å‘Šç®¡ç†ç³»ç»Ÿ -->
    <script>
      // å¹¿å‘Šé…ç½® - ä½¿ç”¨çœŸå®çš„AdSenseå‘å¸ƒå•†ID
      window.adConfig = {
        enabled: true,
        publisherId: 'ca-pub-7608517677287601',
        domain: '6shequ.cn',
        testMode: false, // çœŸå®å¹¿å‘Šæ¨¡å¼
        adUnits: {
          // è¿™äº›IDéœ€è¦ä»AdSenseæ§åˆ¶å°è·å–å®é™…å¹¿å‘Šå•å…ƒID
          banner: 'æ¨ªå¹…å¹¿å‘Šå•å…ƒID',
          interstitial: 'æ’é¡µå¹¿å‘Šå•å…ƒID',
          rewarded: 'æ¿€åŠ±è§†é¢‘å¹¿å‘Šå•å…ƒID'
        }
      };
      
      // è´­ä¹°é…ç½®
      window.purchaseConfig = {
        products: [
          { id: 'remove_ads', price: 2.99, name: 'å»é™¤å¹¿å‘Š', description: 'æ°¸ä¹…å»é™¤æ‰€æœ‰å¹¿å‘Š' },
          { id: 'skin_rainbow', price: 1.99, name: 'å½©è™¹ç¯®å­', description: 'è§£é”å½©è™¹æ¸å˜ç¯®å­çš®è‚¤' },
          { id: 'skin_sparkle', price: 0.99, name: 'æ˜Ÿå…‰ç‰¹æ•ˆ', description: 'ä¸ºæ‰è½ç‰©å“æ·»åŠ æ˜Ÿå…‰å°¾è¿¹' },
          { id: 'powerup_double', price: 0.99, name: 'åŒå€åˆ†æ•°', description: 'ä¸‹ä¸€å±€æ¸¸æˆè·å¾—åŒå€åˆ†æ•°' }
        ]
      };
    </script>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-star"></i> æ¥ä½æ˜Ÿæ˜Ÿ <i class="fas fa-star"></i></h1>
            <p class="subtitle">ä½¿ç”¨å·¦å³ç®­å¤´é”®ç§»åŠ¨ç¯®å­ï¼Œæ¥ä½æ‰è½çš„æ˜Ÿæ˜Ÿï¼</p>
        </header>

        <div class="game-info">
            <div class="score-board">
                <div class="score-item">
                    <span class="score-label">å¾—åˆ†:</span>
                    <span id="score" class="score-value">0</span>
                </div>
                <div class="score-item">
                    <span class="score-label">ç”Ÿå‘½å€¼:</span>
                    <span id="lives" class="score-value">3</span>
                </div>
                <div class="score-item">
                    <span class="score-label">ç­‰çº§:</span>
                    <span id="level" class="score-value">1</span>
                </div>
            </div>

            <div class="controls">
                <button id="start-btn" class="btn btn-start">
                    <i class="fas fa-play"></i> å¼€å§‹æ¸¸æˆ
                </button>
                <button id="pause-btn" class="btn btn-pause" disabled>
                    <i class="fas fa-pause"></i> æš‚åœ
                </button>
                <button id="reset-btn" class="btn btn-reset">
                    <i class="fas fa-redo"></i> é‡æ–°å¼€å§‹
                </button>
            </div>
        </div>

        <div class="game-container">
            <canvas id="gameCanvas" width="800" height="500"></canvas>
            
            <div class="right-panel">
                <div class="ad-container">
                    <div class="ad-label"><i class="fas fa-ad"></i> æ”¯æŒå¼€å‘è€…</div>
                    <div id="ad-banner" class="ad-banner">
                        <!-- å¹¿å‘Šå°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
                        <div class="ad-placeholder">
                            <p>å¹¿å‘Šä½</p>
                            <p>æ”¯æŒæ¸¸æˆæŒç»­å¼€å‘</p>
                        </div>
                    </div>
                    <button id="remove-ads-btn" class="btn btn-premium">
                        <i class="fas fa-crown"></i> å»é™¤å¹¿å‘Š $2.99
                    </button>
                </div>
                
                <!-- å¹¿å‘ŠåŒºåŸŸ -->
                <div class="ad-section">
                    <h3><i class="fas fa-ad"></i> å¹¿å‘Šç³»ç»Ÿ</h3>
                    
                    <!-- æ¨ªå¹…å¹¿å‘Šå®¹å™¨ -->
                    <div class="ad-container">
                        <div class="ad-label"><i class="fas fa-bullhorn"></i> æ¨ªå¹…å¹¿å‘Š</div>
                        <div id="ad-banner" class="ad-banner">
                            <!-- AdSenseæ¨ªå¹…å¹¿å‘Šå°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
                            <div class="ad-placeholder">
                                <i class="fas fa-ad"></i>
                                <p>Google AdSense æ¨ªå¹…å¹¿å‘Š</p>
                                <small>å‘å¸ƒå•†ID: ca-pub-7608517677287601</small>
                            </div>
                        </div>
                    </div>
                    
                    <!-- å¹¿å‘Šæ§åˆ¶ -->
                    <div class="ad-controls">
                        <button id="show-interstitial-btn" class="btn-ad-control">
                            <i class="fas fa-expand"></i> æµ‹è¯•æ’é¡µå¹¿å‘Š
                        </button>
                        <button id="show-rewarded-btn" class="btn-ad-control">
                            <i class="fas fa-video"></i> æµ‹è¯•æ¿€åŠ±è§†é¢‘
                        </button>
                        <button id="toggle-ads-btn" class="btn-ad-control">
                            <i class="fas fa-toggle-on"></i> åˆ‡æ¢å¹¿å‘ŠçŠ¶æ€
                        </button>
                    </div>
                    
                    <!-- å¹¿å‘Šç»Ÿè®¡ -->
                    <div class="ad-stats-container">
                        <h4><i class="fas fa-chart-line"></i> å¹¿å‘Šç»Ÿè®¡</h4>
                        <div id="ad-stats" class="ad-stats">
                            <div>å±•ç¤ºæ¬¡æ•°: 0</div>
                            <div>ç‚¹å‡»æ¬¡æ•°: 0</div>
                            <div>é¢„ä¼°æ”¶å…¥: $0.000</div>
                            <div>ç‚¹å‡»ç‡: 0%</div>
                        </div>
                        <button id="reset-stats-btn" class="btn-small">é‡ç½®ç»Ÿè®¡</button>
                    </div>
                </div>

                <div class="premium-shop">
                    <h3><i class="fas fa-store"></i> æ¸¸æˆå•†åº—</h3>
                    <div class="shop-items">
                        <div class="shop-item" data-id="skin1">
                            <div class="item-icon">ğŸ¨</div>
                            <div class="item-info">
                                <h4>å½©è™¹ç¯®å­</h4>
                                <p>ç‚«å½©æ¸å˜æ•ˆæœ</p>
                                <button class="btn-buy" data-price="1.99">$1.99</button>
                            </div>
                        </div>
                        <div class="shop-item" data-id="skin2">
                            <div class="item-icon">âœ¨</div>
                            <div class="item-info">
                                <h4>æ˜Ÿå…‰ç‰¹æ•ˆ</h4>
                                <p>æ‰è½ç‰©å“å¸¦å°¾è¿¹</p>
                                <button class="btn-buy" data-price="0.99">$0.99</button>
                            </div>
                        </div>
                        <div class="shop-item" data-id="powerup">
                            <div class="item-icon">âš¡</div>
                            <div class="item-info">
                                <h4>åŒå€åˆ†æ•°</h4>
                                <p>ä¸‹ä¸€å±€æ¸¸æˆç”Ÿæ•ˆ</p>
                                <button class="btn-buy" data-price="0.99">$0.99</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="instructions">
                    <h3><i class="fas fa-info-circle"></i> æ¸¸æˆè¯´æ˜:</h3>
                    <ul>
                        <li><i class="fas fa-arrow-left"></i> <i class="fas fa-arrow-right"></i> ä½¿ç”¨å·¦å³ç®­å¤´é”®ç§»åŠ¨ç¯®å­</li>
                        <li><i class="fas fa-star"></i> æ¥ä½é‡‘è‰²æ˜Ÿæ˜Ÿå¾—10åˆ†</li>
                        <li><i class="fas fa-gem"></i> æ¥ä½è“è‰²å®çŸ³å¾—25åˆ†</li>
                        <li><i class="fas fa-bomb"></i> é¿å¼€çº¢è‰²ç‚¸å¼¹ï¼Œå¦åˆ™æ‰£1ç”Ÿå‘½å€¼</li>
                        <li>æ¯å¾—100åˆ†å‡ä¸€çº§ï¼Œæ‰è½é€Ÿåº¦åŠ å¿«</li>
                        <li>ç”Ÿå‘½å€¼ä¸º0æ—¶æ¸¸æˆç»“æŸ</li>
                    </ul>
                </div>
            </div>
        </div>

        <div id="game-over" class="game-over hidden">
            <h2>æ¸¸æˆç»“æŸ!</h2>
            <p>æœ€ç»ˆå¾—åˆ†: <span id="final-score">0</span></p>
            <p>æœ€é«˜ç­‰çº§: <span id="final-level">1</span></p>
            <button id="restart-btn" class="btn btn-start">
                <i class="fas fa-redo"></i> å†ç©ä¸€æ¬¡
            </button>
        </div>

        <footer>
            <p>ä½¿ç”¨ HTML5 Canvas åˆ¶ä½œçš„ç®€å•å°æ¸¸æˆ | æŒ‰ F11 å…¨å±ä½“éªŒæ›´ä½³</p>
            <p class="hint"><i class="fas fa-lightbulb"></i> æç¤º: åœ¨æ‰‹æœºä¸Šå¯ä»¥é€šè¿‡è§¦æ‘¸å±å¹•å·¦å³ä¸¤ä¾§æ¥æ§åˆ¶</p>
        </footer>
    </div>

    <script src="game.js"></script>
    <script src="ads-manager.js"></script>
    <script src="test-runner.js"></script>
    
    <!-- ç›ˆåˆ©åŠŸèƒ½è„šæœ¬ -->
    <script>
      // æ³¨å†ŒService Workerï¼ˆPWAæ”¯æŒï¼‰
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('/sw.js')
            .then(registration => {
              console.log('ServiceWorkeræ³¨å†ŒæˆåŠŸ:', registration.scope);
            })
            .catch(error => {
              console.log('ServiceWorkeræ³¨å†Œå¤±è´¥:', error);
            });
        });
      }
      
      // ç›ˆåˆ©åŠŸèƒ½åˆå§‹åŒ–
      document.addEventListener('DOMContentLoaded', function() {
        // è´­ä¹°æŒ‰é’®äº‹ä»¶
        document.querySelectorAll('.btn-buy').forEach(button => {
          button.addEventListener('click', function() {
            const itemId = this.closest('.shop-item').dataset.id;
            const price = this.dataset.price;
            handlePurchase(itemId, price);
          });
        });
        
        // å»é™¤å¹¿å‘ŠæŒ‰é’®
        document.getElementById('remove-ads-btn').addEventListener('click', function() {
          handlePurchase('remove_ads', '2.99');
        });
        
        // å¹¿å‘Šæ§åˆ¶æŒ‰é’®äº‹ä»¶
        document.getElementById('show-interstitial-btn').addEventListener('click', function() {
          if (window.adManager) {
            window.adManager.showInterstitial();
          } else {
            alert('å¹¿å‘Šç®¡ç†ç³»ç»ŸæœªåŠ è½½');
          }
        });
        
        document.getElementById('show-rewarded-btn').addEventListener('click', function() {
          if (window.adManager) {
            window.adManager.showRewardedAd(function(success) {
              if (success) {
                alert('å¥–åŠ±å·²å‘æ”¾ï¼ä¸‹ä¸€å±€æ¸¸æˆå°†è·å¾—ç‰¹æ®ŠåŠ æˆã€‚');
              }
            });
          } else {
            alert('å¹¿å‘Šç®¡ç†ç³»ç»ŸæœªåŠ è½½');
          }
        });
        
        document.getElementById('toggle-ads-btn').addEventListener('click', function() {
          if (window.adManager) {
            const enabled = window.adManager.userPrefs.adsEnabled;
            if (enabled) {
              window.adManager.removeAds();
              this.innerHTML = '<i class="fas fa-toggle-off"></i> å¯ç”¨å¹¿å‘Š';
            } else {
              window.adManager.restoreAds();
              this.innerHTML = '<i class="fas fa-toggle-on"></i> ç¦ç”¨å¹¿å‘Š';
            }
          }
        });
        
        document.getElementById('reset-stats-btn').addEventListener('click', function() {
          if (window.adManager) {
            window.adManager.resetStats();
            alert('å¹¿å‘Šç»Ÿè®¡å·²é‡ç½®');
          }
        });
        
        // æ£€æŸ¥æœ¬åœ°è´­ä¹°çŠ¶æ€
        checkPurchaseStatus();
        
        // åˆå§‹åŒ–å¹¿å‘Šç»Ÿè®¡æ˜¾ç¤º
        if (window.adManager) {
          window.adManager.updateStatsDisplay();
        }
      });
      
      // å¤„ç†è´­ä¹°
      function handlePurchase(itemId, price) {
        if (window.adConfig.testMode) {
          // æµ‹è¯•æ¨¡å¼ - æ¨¡æ‹Ÿè´­ä¹°
          alert(`æµ‹è¯•è´­ä¹°: ${itemId} - $${price}\nå®é™…éƒ¨ç½²æ—¶éœ€è¦é›†æˆæ”¯ä»˜ç³»ç»Ÿ`);
          savePurchase(itemId);
        } else {
          // å®é™…éƒ¨ç½²æ—¶è°ƒç”¨æ”¯ä»˜API
          // è¿™é‡Œéœ€è¦é›†æˆStripeã€PayPalã€å¾®ä¿¡æ”¯ä»˜ç­‰
          console.log(`å‘èµ·è´­ä¹°: ${itemId} - $${price}`);
        }
      }
      
      // ä¿å­˜è´­ä¹°çŠ¶æ€
      function savePurchase(itemId) {
        const purchases = JSON.parse(localStorage.getItem('game_purchases') || '[]');
        if (!purchases.includes(itemId)) {
          purchases.push(itemId);
          localStorage.setItem('game_purchases', JSON.stringify(purchases));
          applyPurchase(itemId);
        }
      }
      
      // åº”ç”¨è´­ä¹°æ•ˆæœ
      function applyPurchase(itemId) {
        switch(itemId) {
          case 'remove_ads':
            document.getElementById('ad-banner').style.display = 'none';
            document.getElementById('remove-ads-btn').style.display = 'none';
            document.querySelector('.ad-label').innerHTML = '<i class="fas fa-crown"></i> å·²å»é™¤å¹¿å‘Š - æ„Ÿè°¢æ”¯æŒï¼';
            break;
          case 'skin1':
          case 'skin_rainbow':
            alert('å·²è§£é”å½©è™¹ç¯®å­çš®è‚¤ï¼');
            break;
          case 'skin2':
          case 'skin_sparkle':
            alert('å·²è§£é”æ˜Ÿå…‰ç‰¹æ•ˆï¼');
            break;
          case 'powerup':
          case 'powerup_double':
            alert('ä¸‹ä¸€å±€æ¸¸æˆå°†è·å¾—åŒå€åˆ†æ•°ï¼');
            break;
        }
      }
      
      // æ£€æŸ¥è´­ä¹°çŠ¶æ€
      function checkPurchaseStatus() {
        const purchases = JSON.parse(localStorage.getItem('game_purchases') || '[]');
        purchases.forEach(applyPurchase);
      }
      
      // æ˜¾ç¤ºå¹¿å‘Šï¼ˆæ¨¡æ‹Ÿï¼‰
      function showAd() {
        if (!window.adConfig.enabled) return;
        
        const purchases = JSON.parse(localStorage.getItem('game_purchases') || '[]');
        if (purchases.includes('remove_ads')) return;
        
        // å®é™…éƒ¨ç½²æ—¶è¿™é‡Œä¼šæ˜¾ç¤ºçœŸå®å¹¿å‘Š
        // ç°åœ¨åªæ˜¯æ¨¡æ‹Ÿ
        console.log('æ˜¾ç¤ºå¹¿å‘Š');
      }
      
      // æ¸¸æˆäº‹ä»¶è§¦å‘å¹¿å‘Š
      setInterval(() => {
        if (Math.random() < 0.01) { // 1%æ¦‚ç‡è§¦å‘å¹¿å‘Š
          showAd();
        }
      }, 30000); // æ¯30ç§’æ£€æŸ¥ä¸€æ¬¡
    </script>
</body>
</html>